<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Viewer</title>
</head>
<body style="background:black;color:lime;">
<canvas id="screen" style="width:100%;"></canvas>

<script>
//const ws = new WebSocket("ws://localhost:8080");  // CAMBIAR si es remoto
const ws = new WebSocket("wss://render-websocket-screen-share.onrender.com");   
ws.binaryType = "arraybuffer";

const canvas = document.getElementById("screen");
const ctx = canvas.getContext("2d", { alpha: false });

ws.onmessage = async (event) => {
  const ab = event.data;                      // ArrayBuffer directo
  const blob = new Blob([ab], { type: "image/webp" });

  // createImageBitmap es r√°pido y nativo
  const img = await createImageBitmap(blob);

  canvas.width = img.width;
  canvas.height = img.height;

  ctx.drawImage(img, 0, 0);
};
</script>
</body>
</html>

